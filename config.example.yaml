# =============================================================================
# Doorman Agent - Configuration File
# =============================================================================
# Copy this file as config.yaml and adjust according to your environment.
#
# Get your API key at: https://doorman.com/dashboard/api-keys

# -----------------------------------------------------------------------------
# API Connection
# -----------------------------------------------------------------------------
# Your doorman.com API key - recommended to set via DOORMAN_API_KEY env var
api_key: null  # Or set DOORMAN_API_KEY environment variable

# API endpoint (default: https://api.doorman.com)
api_url: "https://api.doorman.com"

# -----------------------------------------------------------------------------
# Local Mode
# -----------------------------------------------------------------------------
# Set to true to only log metrics locally (no API calls)
# Useful for testing or when you want to analyze logs without sending to API
local_mode: false

# -----------------------------------------------------------------------------
# Redis/Celery Connections
# -----------------------------------------------------------------------------
redis_url: "redis://localhost:6379/0"
celery_broker_url: "redis://localhost:6379/0"
celery_app_name: "tasks"

# -----------------------------------------------------------------------------
# Agent Behavior
# -----------------------------------------------------------------------------
check_interval_seconds: 30  # How often to collect and send metrics

# -----------------------------------------------------------------------------
# Queues to Monitor
# List of Celery queue names in Redis
# -----------------------------------------------------------------------------
monitored_queues:
  - celery  # Celery default queue
  - default
  - priority
  - emails
  - notifications

# -----------------------------------------------------------------------------
# Thresholds (for local logging - actual alerting is configured in dashboard)
# -----------------------------------------------------------------------------
thresholds:
  max_queue_size: 1000
  max_wait_time_seconds: 60
  max_task_runtime_seconds: 1800  # 30 minutes
  critical_queues:
    - emails
    - notifications
